<!-- poem.wxml - åŸåˆ›è¯—æ­Œé¡µé¢ï¼ˆè·¯ï¼‰ -->
<view class="container" style="background-image: {{backgroundImage ? 'url(' + backgroundImage + ')' : 'none'}}; background-size: cover; background-position: center;">
  <!-- æ¨¡ç³ŠèƒŒæ™¯å±‚ -->
  <view wx:if="{{backgroundImage}}" class="blur-background" style="background-image: url({{backgroundImage}});"></view>

  <!-- éª¨æ¶å± -->
  <view wx:if="{{isLoading && postList.length === 0}}" class="skeleton-container">
    <skeleton />
  </view>

  <!-- è·¯æ¨¡å¼ï¼ˆåŸåˆ›è¯—æ­Œï¼‰ -->
  <view wx:if="{{postList.length > 0}}" class="poem-mode-container" bindtouchstart="touchStart" bindtouchend="touchEnd">
    <!-- æ”¶è—æŒ‰é’® -->
    <view class="favorite-btn" bindtap="showFavoriteModal" data-post-id="{{postList[currentPostIndex]._id}}">
      <view class="favorite-icon">â¤ï¸</view>
    </view>
    
    <view class="single-post-content" catchtap="onSinglePostTap" data-postid="{{postList[currentPostIndex]._id}}">
      <!-- ä½œè€…ä¿¡æ¯ -->
      <view class="single-author-info">
        <image wx:if="{{postList[currentPostIndex].authorAvatar}}" class="single-author-avatar" src="{{postList[currentPostIndex].authorAvatar}}" mode="aspectFill" />
        <text class="single-author-name">{{postList[currentPostIndex].authorName}}</text>
      </view>
      
      <!-- æ ‡é¢˜ -->
      <view class="single-post-title" wx:if="{{postList[currentPostIndex].title}}">{{postList[currentPostIndex].title}}</view>
      
      <!-- å†…å®¹ -->
      <view class="single-post-content-text" wx:if="{{postList[currentPostIndex].content}}" style="white-space: pre-wrap;">{{postList[currentPostIndex].content}}</view>
      
    </view>
    
    <view wx:if="{{postList.length === 0 && !isLoading}}" class="empty-state">
      <view class="empty-icon">ğŸ›¤ï¸</view>
      <view class="empty-text">è¿˜æ²¡æœ‰è·¯è¯—å“¦ï½</view>
      <view class="empty-subtext">å¿«å»å¹¿åœºå‘ç°åŸåˆ›å¥½è¯—å§ï¼</view>
    </view>
  </view>


  <!-- è°ƒè¯•æŒ‰é’® (ä»…åœ¨å¼€å‘ç¯å¢ƒæ˜¾ç¤º) -->
  <view wx:if="{{false}}" class="debug-button" bindtap="testImageUrls">
    <view>ğŸ›</view>
  </view>

  <!-- æ”¶è—å¤¹é€‰æ‹©å™¨ -->
  <folder-selector 
    show="{{showFavoriteModal}}"
    post-id="{{currentPostId}}"
    bind:hide="hideFavoriteModal"
    bind:favoriteSuccess="onFavoriteSuccess" />
</view>