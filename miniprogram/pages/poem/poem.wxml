<!-- poem.wxml - 原创诗歌页面（路） -->
<view class="container">
  <!-- 双缓冲背景图片层 - 避免闪烁 -->
  <view class="background-container">
    <!-- 当前背景图片 -->
    <view wx:if="{{backgroundImage}}" 
          class="background-image current" 
          style="background-image: url({{backgroundImage}}); background-size: cover; background-position: center;">
    </view>
    
    <!-- 预加载背景图片 -->
    <view wx:if="{{nextBackgroundImage}}" 
          class="background-image next" 
          style="background-image: url({{nextBackgroundImage}}); background-size: cover; background-position: center;">
    </view>
  </view>
  
  <!-- 模糊背景层 -->
  <view wx:if="{{backgroundImage}}" 
        class="blur-background" 
        style="background-image: url({{backgroundImage}});">
  </view>

  <!-- 骨架屏 -->
  <view wx:if="{{isLoading && postList.length === 0}}" class="skeleton-container">
    <skeleton />
  </view>

  <!-- 路模式（原创诗歌） -->
  <view wx:if="{{postList.length > 0}}" class="poem-mode-container" bindtouchstart="touchStart" bindtouchend="touchEnd">
    
    <view class="single-post-content" catchtap="onSinglePostTap" data-postid="{{postList[currentPostIndex]._id}}">
      <!-- 作者信息 -->
      <view class="single-author-info">
        <image wx:if="{{postList[currentPostIndex].authorAvatar}}" class="single-author-avatar" src="{{postList[currentPostIndex].authorAvatar}}" mode="aspectFill" />
        <text class="single-author-name">{{postList[currentPostIndex].authorName}}</text>
      </view>
      
      <!-- 标题 -->
      <view class="single-post-title" wx:if="{{postList[currentPostIndex].title}}">{{postList[currentPostIndex].title}}</view>
      
      <!-- 内容 -->
      <view class="single-post-content-text" wx:if="{{postList[currentPostIndex].content}}" style="white-space: pre-wrap;">{{postList[currentPostIndex].content}}</view>
      
    </view>
    
    <view wx:if="{{postList.length === 0 && !isLoading}}" class="empty-state">
      <view class="empty-icon">🛤️</view>
      <view class="empty-text">还没有路诗哦～</view>
      <view class="empty-subtext">快去广场发现原创好诗吧！</view>
    </view>
  </view>


  <!-- 调试按钮 (仅在开发环境显示) -->
  <view wx:if="{{false}}" class="debug-button" bindtap="testImageUrls">
    <view>🐛</view>
  </view>

  
</view>